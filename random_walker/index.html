<!DOCTYPE html>
<html>
<head>
  <title>Random Walker test</title>
  <style type="text/css">
    body {
      margin: 0;
    }
  </style>
  <script type="text/javascript">
    (function() {
      const canvasWidth = window.innerWidth;
      const canvasHeight = window.innerHeight;
      const step = 1;
      const contentLoaded = function () {
        const form = document.getElementById('js_formControl');
        form.addEventListener('submit', submitForm);
        drawMap(10000, 1);
      };
      document.addEventListener('DOMContentLoaded', contentLoaded, false);

      const submitForm = function(evt) {
        evt.preventDefault();
        const form = evt.currentTarget;
        const iterations = form.querySelector('.js_steps');
        const boldness = form.querySelector('.js_boldness');
        drawMap(parseInt(iterations.value), parseInt(boldness.value));
        return false;
      }

      const drawMap = function (iterations, boldness) {
        if (iterations < 10) return;
        if (boldness < 1) return;
        const canvas = document.getElementById('playground');
        var ctx = canvas.getContext('2d');
        const startPosition = {
          'x': parseInt(canvasWidth / 2),
          'y': parseInt(canvasHeight / 2)
        };
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;
        ctx.fillStyle = 'rgb(255, 0, 0)';
        ctx.fillRect(startPosition.x, startPosition.y, boldness, boldness);
        let x = startPosition.x;
        let y = startPosition.y;
        for (var i = iterations; i > 1; i--) {
          const chanel = parseInt(i / iterations * 255);
          const newStep = advance(x, y);
          ctx.fillStyle = 'rgb(255,' + chanel + ', 0)';
          ctx.fillRect(x, y, boldness, boldness);
          y = newStep.y;
          x = newStep.x;
        }
      }
      // Tail / head coin, thrown twice : one for up/down, one for left/right
      const advance = function(width, height) {
        return {
          'x': Math.random() >= 0.5 ? width += step : width -= step,
          'y': Math.random() >= 0.5 ? height += step : height -= step
        };
      }
    })();
  </script>
</head>

<body>
  <h1>Walker path</h1>
  <p>
    Simplest path drawer : Head/tail coin method (yellow is spawn point)
    <small>Read this <a href="http://natureofcode.com/book/introduction/">here</a></small>
</p>
  <form action="#" id="js_formControl">
    <input type="number" name="steps" min="1000" value="50000" step="1000" class="js_steps">
    <input type="number" name="steps" min="1" value="1" class="js_boldness">
    <input type="submit" name="submit" value="Randomize">
  </form>

  <canvas id="playground"></canvas>
</body>
</html>
